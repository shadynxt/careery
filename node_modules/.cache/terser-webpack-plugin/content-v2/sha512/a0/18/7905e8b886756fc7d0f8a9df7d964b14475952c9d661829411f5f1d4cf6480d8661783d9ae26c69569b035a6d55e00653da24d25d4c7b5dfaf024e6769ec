{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{ntzx:function(t,e){!function(){function t(){this.drawDataset=this.drawDataset.bind(this)}function e(e,i){if(function(e){if(e.options.pieceLabel){var i=1;if(Array.isArray(e.options.pieceLabel)&&(i=e.options.pieceLabel.length),!e.pieceLabel||i!==e.pieceLabel.length){e.pieceLabel=[];for(var a=0;a<i;++a)e.pieceLabel.push(new t)}}else e.pieceLabel&&delete e.pieceLabel;return e.pieceLabel}(e))for(var a=0;a<e.pieceLabel.length;++a)e.pieceLabel[a][i](e,a)}\"undefined\"!=typeof Chart?(Array.isArray||(Array.isArray=function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}),t.prototype.beforeDatasetsUpdate=function(t,e){if(this.parseOptions(t,e),\"outside\"===this.position){var i=1.5*this.fontSize+this.outsidePadding;t.chartArea.top+=i,t.chartArea.bottom-=i}},t.prototype.afterDatasetsDraw=function(t,e){this.parseOptions(t,e),this.labelBounds=[],t.config.data.datasets.forEach(this.drawDataset)},t.prototype.drawDataset=function(t){var e=this.ctx,i=this.chartInstance,a=t._meta[Object.keys(t._meta)[0]];this.totalPercentage=0,this.total=null;for(var o=0;o<a.data.length;o++){var s,r=a.data[o],n=r._view;if(this.shouldRenderData(n)){switch(this.render){case\"value\":var h=t.data[o];this.format&&(h=this.format(h)),s=h.toString();break;case\"label\":s=i.config.data.labels[o];break;case\"image\":s=this.images[o]?this.loadImage(this.images[o]):\"\";break;case\"percentage\":default:percentage=this.getPercentage(n,t,o),s=percentage+\"%\"}if(\"function\"==typeof this.render&&(s=null==(s=this.render({label:i.config.data.labels[o],value:t.data[o],percentage:percentage,dataset:t,index:o}))?\"\":\"object\"==typeof s?this.loadImage(s):s.toString()),s){e.save(),e.beginPath(),e.font=Chart.helpers.fontString(this.fontSize,this.fontStyle,this.fontFamily);var l,f,c=0;if(\"outside\"===this.position||\"border\"===this.position){f=n.outerRadius/2;var d,p=this.fontSize+this.textMargin,g=n.startAngle+(n.endAngle-n.startAngle)/2;\"border\"===this.position?d=(n.outerRadius-f)/2+f:\"outside\"===this.position&&(this.arc||(p=this.textMargin),d=n.outerRadius-f+f+p),l={x:n.x+Math.cos(g)*d,y:n.y+Math.sin(g)*d},\"outside\"===this.position&&(this.arc||(p+=this.measureText(s).width/2),l.x<n.x?l.x-=p:l.x+=p,c=n.outerRadius+p)}else f=n.innerRadius,l=r.tooltipPosition();var u=this.fontColor;if(\"function\"==typeof u?u=u({label:i.config.data.labels[o],value:t.data[o],percentage:percentage,text:s,backgroundColor:t.backgroundColor[o],dataset:t,index:o}):\"string\"!=typeof u&&(u=u[o]||this.options.defaultFontColor),this.arc)c||(c=(f+n.outerRadius)/2),e.fillStyle=u,e.textBaseline=\"middle\",this.drawArcText(s,c,n,this.overlap);else{var w=this.measureText(s),x=l.x-w.width/2,b=l.x+w.width/2,y=l.y-w.height/2,v=l.y+w.height/2;(this.overlap||(\"outside\"===this.position?this.checkTextBound(x,b,y,v):r.inRange(x,y)&&r.inRange(x,v)&&r.inRange(b,y)&&r.inRange(b,v)))&&this.fillText(s,l,u)}e.restore()}}}},t.prototype.shouldRenderData=function(t){return\"polarArea\"===this.chartInstance.config.type?0!==t.outerRadius:0!==t.circumference||this.showZero},t.prototype.getPercentage=function(t,e,i){var a;if(\"polarArea\"===this.chartInstance.config.type){if(null===this.total){this.total=0;for(var o=0;o<e.data.length;++o)this.total+=e.data[o]}a=e.data[i]/this.total*100}else a=t.circumference/this.options.circumference*100;return a=parseFloat(a.toFixed(this.precision)),this.showActualPercentages||(this.totalPercentage+=a,this.totalPercentage>100&&(a-=this.totalPercentage-100,a=parseFloat(a.toFixed(this.precision)))),a},t.prototype.parseOptions=function(t,e){var i=t.options.pieceLabel;Array.isArray(i)&&(i=i[e]),this.chartInstance=t,this.ctx=t.chart.ctx,this.options=t.config.options,this.render=i.render||i.mode,this.position=i.position||\"default\",this.arc=i.arc,this.format=i.format,this.precision=i.precision||0,this.fontSize=i.fontSize||this.options.defaultFontSize,this.fontColor=i.fontColor||this.options.defaultFontColor,this.fontStyle=i.fontStyle||this.options.defaultFontStyle,this.fontFamily=i.fontFamily||this.options.defaultFontFamily,this.shadowOffsetX=i.shadowOffsetX||3,this.shadowOffsetY=i.shadowOffsetY||3,this.shadowColor=i.shadowColor||\"rgba(0,0,0,0.3)\",this.shadowBlur=i.shadowBlur||6,this.textShadow=i.textShadow||!1,this.hasTooltip=t.tooltip._active&&t.tooltip._active.length,this.showZero=i.showZero,this.overlap=i.overlap,this.images=i.images||[],this.outsidePadding=i.outsidePadding||2,this.textMargin=i.textMargin||2,this.showActualPercentages=i.showActualPercentages||!1},t.prototype.checkTextBound=function(t,e,i,a){for(var o=this.labelBounds,s=0;s<o.length;++s){for(var r=o[s],n=[[t,i],[t,a],[e,i],[e,a]],h=0;h<n.length;++h){var l=n[h][1];if((f=n[h][0])>=r.left&&f<=r.right&&l>=r.top&&l<=r.bottom)return!1}for(n=[[r.left,r.top],[r.left,r.bottom],[r.right,r.top],[r.right,r.bottom]],h=0;h<n.length;++h){var f;if(l=n[h][1],(f=n[h][0])>=t&&f<=e&&l>=i&&l<=a)return!1}}return o.push({left:t,right:e,top:i,bottom:a}),!0},t.prototype.measureText=function(t){if(\"object\"==typeof t)return{width:t.width,height:t.height};for(var e=0,i=t.split(\"\\n\"),a=0;a<i.length;++a){var o=this.ctx.measureText(i[a]);o.width>e&&(e=o.width)}return{width:e,height:this.fontSize*i.length}},t.prototype.fillText=function(t,e,i){var a=this.ctx;if(\"object\"==typeof t)a.drawImage(t,e.x-t.width/2,e.y-t.height/2,t.width,t.height);else{a.save(),a.fillStyle=i,a.textBaseline=\"top\",a.textAlign=\"center\",this.textShadow&&(a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur);for(var o=t.split(\"\\n\"),s=0;s<o.length;s++)a.fillText(o[s],e.x,e.y-this.fontSize/2*o.length+this.fontSize*s);a.restore()}},t.prototype.loadImage=function(t){var e=new Image;return e.src=t.src,e.width=t.width,e.height=t.height,e},t.prototype.drawArcText=function(t,e,i,a){var o=this.ctx,s=i.x,r=i.y,n=i.startAngle,h=i.endAngle;o.save(),o.translate(s,r),o.textAlign=\"left\";var l=h-n,f=n+=Math.PI/2;if(n+=((h+=Math.PI/2)-((w=this.measureText(t)).width/e+n))/2,!a&&h-n>l)o.restore();else{if(\"string\"==typeof t){o.rotate(n);var c=t.split(\"\\n\"),d=0,p=[],g=0;\"border\"===this.position&&(g=(c.length-1)*this.fontSize/2);for(var u=0;u<c.length;++u){var w;(w=o.measureText(c[u])).width>d&&(d=w.width),p.push(w.width)}for(u=0;u<c.length;++u){var x=c[u],b=(c.length-1-u)*-this.fontSize+g;o.save(),o.rotate((d-p[u])/2/e);for(var y=0;y<x.length;y++){var v=x.charAt(y);w=o.measureText(v),o.save(),o.translate(0,-1*e),o.fillText(v,0,b),o.restore(),o.rotate(w.width/e)}o.restore()}}else o.rotate((f+h)/2),o.translate(0,-1*e),this.fillText(t,{x:0,y:0});o.restore()}},Chart.pluginService.register({name:\"PieceLabel\",beforeDatasetsUpdate:function(t){e(t,\"beforeDatasetsUpdate\")},afterDatasetsDraw:function(t){e(t,\"afterDatasetsDraw\")}})):console.warn(\"Can not find Chart object.\")}()}}]);","extractedComments":[]}